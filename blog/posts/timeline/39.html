
<am-list>
  
  <am-summary href="/blog/2012/04/26/profiling-nodejs-application" time="2012-04-26 07:22:00 +0800" slug="/blog/tags/%s" tags="[Mindon Web-Tech]">
    <a slot="title" href="/blog/2012/04/26/profiling-nodejs-application">Profiling Node.JS Application</a>
    <div slot="summary"><style>img{max-width:100%}</style><h2>NodeJS</h2>

<p>Call something like &ldquo;ulimit -n 8192&rdquo; in your NodeJS App start shell script, before start your nodejs service.</p>

<p>Running with &ndash;prof to generate the v8.log</p>

<p>node &ndash;prof &ndash;prof_lazy app.js</p>

<p>with tools in /node/deps/v8/, you can get report like following:</p>

<p>(run <code>tools/linux-tick-processor path-of-v8.log</code>)</p>

<p>[Shared libraries]:
ticks  total  nonlib   name
3    0.0%    0.0%  &hellip;/libc-2.13.so</p>

<p>[JavaScript]:
ticks  total  nonlib   name
1    0.0%    0.0%  Stub: InstanceofStub</p>

<p>[C++]:
ticks  total  nonlib   name
1    0.0%    0.0%  __write
&hellip;</p>

<p>[GC]:
ticks  total  nonlib   name
15    0.0%</p>

<p>[Bottom up (heavy) profile]:
Note: percentage shows a share of a particular caller in the total
amount of its parent calls.
Callers occupying less than 2.0% are not shown.</p>

<p>ticks parent  name
&hellip;</p>

<p>trace log</p>

<p>strace -o trace.log -cf node app.js:</p>

<p>or simple get the time</p>

<p>time node app.js</p>

<h2>Other Modules &amp; Tools</h2>

<ul>
<li><a href="http://dtrace.org"><strong>dtrace</strong></a></li>
</ul>

<p>read the nodejs blog <a href="http://blog.nodejs.org/2012/04/25/profiling-node-js/">http://blog.nodejs.org/2012/04/25/profiling-node-js/</a></p>

<p>dtrace -o stacks.out -n &lsquo;profile-97/execname == &ldquo;node&rdquo; &amp;&amp; arg1/{
@[jstack(100, 8000)] = count(); } tick-60s { exit(0); }&rsquo;</p>

<ul>
<li><strong>v8-profiler</strong></li>
</ul>

<p>@Github <a href="https://github.com/dannycoates/v8-profiler">https://github.com/dannycoates/v8-profiler</a></p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/04/26/the-eye-limits-the-brains-learning-potential" time="2012-04-26 08:12:00 +0800" slug="/blog/tags/%s" tags="[Light-Air-Water-M-Sci]">
    <a slot="title" href="/blog/2012/04/26/the-eye-limits-the-brains-learning-potential">The eye limits the brain's learning potential</a>
    <div slot="summary"><style>img{max-width:100%}</style><p>The concept of a critical period for visual development early in life during which sensory experience is essential to normal neural development is now well established. However recent evidence suggests that a limited degree of plasticity remains after this period and well into adulthood. Here, we ask the question, &ldquo;what limits the degree of plasticity in adulthood?&rdquo; Although this limit has been assumed to be due to neural factors, we show that the optical quality of the retinal image ultimately limits the brain potential for change. We correct the high-order aberrations (HOAs) normally present in the eye&rsquo;s optics using adaptive optics, and reveal a greater degree of neuronal plasticity than previously appreciated.</p>

<p>[<a href="http://www.nature.com/srep/2012/120413/srep00364/full/srep00364.html">read the full version article</a>]</p>

<p>Nature集团新刊《Scientific Reports》于4月16日在线发表了中国科学技术大学脑功能与脑疾病中科院重点实验室及生命科学学院周逸峰研究小组和中国科学院成都光电技术研究所自适应光学重点实验室张雨东研究小组的合作研究成果。</p>

<p>他们通过实验证明，即便是发育成熟之后正常成年视觉神经系统仍具有相当程度的可塑性，但这些可塑性的发挥受限于人眼的光学系统质量。在使用人眼自适应光学矫正仪提高人眼光学系统质量后进行知觉学习训练可以大幅度提高正常成人的视觉功能。</p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/04/25/aby-is-on-the-road-lhasa" time="2012-04-25 07:59:00 +0800" slug="/blog/tags/%s" tags="[Mindon]">
    <a slot="title" href="/blog/2012/04/25/aby-is-on-the-road-lhasa">Aby is on the road: Lhasa</a>
    <div slot="summary"><style>img{max-width:100%}</style><h2>Aby在路上…</h2>

<p>这一趟，Aby出门时间比较久。</p>

<p>先是飞由天津回家，在家里帮着忙活新装修的家选购家具什么的。</p>

<p>之后再经由天津往北京和可心汇合，考察大导咖啡馆的事宜，并准备一起前往西藏拉萨。</p>

<p>她们先是飞达西宁，在那去感受了一下青海湖——“早上的青海湖变了一个颜色，让人心悸的淡蓝。羊群跑上公路，水鸟飞起，如果是夏季定会更美。”（<a href="http://weibo.com/1416075644/yg3hZBuel">来源</a>）</p>

<p>接着就乘坐火车前往目的地——拉萨。</p>

<p>“坐上开往拉萨的列车，好好睡一觉，等待明天的美景。” （<a href="http://weibo.com/1416075644/yfZu49FvY">来源</a>）</p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/04/17/abys-menu" time="2012-04-17 22:41:00 +0800" slug="/blog/tags/%s" tags="[Mindon]">
    <a slot="title" href="/blog/2012/04/17/abys-menu">外出Aby发回的菜谱</a>
    <div slot="summary"><style>img{max-width:100%}</style><p>Aby 不在身边，吃饭的事情也不能马虎了。给我特意准备了菜单，提醒我注意饮食：</p>

<hr />

<h2>早餐选择：</h2>

<p>1、花卷+豆浆</p>

<p>2、牛奶+吐司（夹蛋）</p>

<p>吐司可从岁宝可颂坊买，或者买白吐司。</p>

<p>3、粥</p>

<p>可配菜：</p>

<p>香菜炒蛋、酱炒蛋（冰箱里有）</p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/04/17/find-out-unique-javascript-array-elements" time="2012-04-17 22:53:00 +0800" slug="/blog/tags/%s" tags="[Mindon Web-Tech]">
    <a slot="title" href="/blog/2012/04/17/find-out-unique-javascript-array-elements">Find out Unique Elements in a Javascript Array</a>
    <div slot="summary"><style>img{max-width:100%}</style><p>To remove duplicate elements in a array, there are a few algorithms to implement.</p>

<h2>Algorithm 1</h2>

<p>function unique1(d) {
var o = {}, i, l = d.length, r = [];
for(i=0; i;i+=1) o[d[i]] = d[i];
for(i in o) r.push(o[i]);
return r;
};</p>

<p>This method has 2 loops, that&rsquo;s a big time-cost problem.</p>

<h2>Algorithm 2</h2>

<p>reduce one loop from the algorithm 1, improve a litter bit</p>

<p>function unique2(d) {
var r = [], i = {}, j = 0;
for(var k=0, kmax=d.length; k<kmax; k++) {
if(!i[d[k]]) {
i[d[k]] = 1;
r[j++]=d[k];
}
}
return r;
}</p>

<h2>Algorithm 3</h2>

<p>In ECMA-262 standard, there&rsquo;s a indexOf method for Array object, we use it to improve a lot.</p>

<p>function unique3(d) {
var r = [], j = 0;
for(var k=0, kmax=d.length; k<kmax; k++) {
if(r.indexOf(d[k]) &lt; 0) {
r[j++]=d[k];
}
}
return r;
}</p>

<p>and it could be better&hellip;</p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/04/15/matching-method-predictably-irrational" time="2012-04-15 16:38:00 +0800" slug="/blog/tags/%s" tags="[Mindon]">
    <a slot="title" href="/blog/2012/04/15/matching-method-predictably-irrational">Matching method: Predictably Irrational</a>
    <div slot="summary"><style>img{max-width:100%}</style><p>对于正在寻求或建立长期关系的朋友，怪诞行为学（Predictably Irrational）里提到 “独木舟与夫妻关系”片段，绝对是要学习和参考的：</p>

<p><strong>遇到问题时，是会相互抱怨还是一起寻找原因，同心协力解决问题？</strong></p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/04/15/modern-superstitions" time="2012-04-15 17:42:00 +0800" slug="/blog/tags/%s" tags="[Mindon]">
    <a slot="title" href="/blog/2012/04/15/modern-superstitions">Modern Superstitions</a>
    <div slot="summary"><style>img{max-width:100%}</style><h2>现代迷信</h2>

<p>相信任何事的三个坏理由：<strong>传统</strong>、<strong>权威</strong>和<strong>启示</strong>。</p>

<p>互联网时代，也是谣言、谎话、虚假广告、洗脑流行的时代，你有什么根据相信你所听到的、看到的文字或这画面？</p>

<p>大多时候，我们其实毫无根据——就是相信了。</p>

<p>大脑被商业化广告植入了太多的无根据信任。</p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/04/15/there-are-other-choices" time="2012-04-15 10:29:00 +0800" slug="/blog/tags/%s" tags="[Mindon]">
    <a slot="title" href="/blog/2012/04/15/there-are-other-choices">There are other choices</a>
    <div slot="summary"><style>img{max-width:100%}</style><p>昨天送Aby到机场，从地铁出来往机场的中途有个扶手电梯正在维修中。因为拖着很沉的大箱子的缘故，第一想法就是糟了——要怎么拖下那个楼梯？虽然有斜坡，但那也是不容易的事情。</p>

<p>幸运的是，旁边一个路人提醒了——左手边上有电梯！太好了！问题解决了——然而，为什么看到扶手电梯不可用的时候，只想到了旁边的楼梯，而没考虑过这样的地方一定会有直升电梯的呢？就如地铁里总有直升电梯，给不方便的人群提供选择。</p>

<p>如果独我一人这样也就算了，当我回来的时候，发现陆续走过的人也在面临同样的问题时——我提醒他们了，旁边有电梯可用——觉得这个问题其实是很普遍的。</p>

<p>这个事情的关键是：在问题的最接近的地方提供了一种选择（解决方案），并且最好的选择被放置在一个不容易发现的地方，且没有指示。</p>

<p>手动扶梯有问题了，最近且最容易被发现的解决方案是走楼梯，在没有任何提醒的情况下大多数人都没有考虑可能有别的选择——另一种就在不远处，且更好的解决方案。</p>

<p>当然，要解决这个问题其实是很简单的，就是在问题发生处，箭头指示替代方案所在。</p>

<p>在做产品过程中，这个案例是有所启发的。特此警醒自己。</p>

<hr />

<p>由这个现象，我想起了以前碰到的另外一件事情：</p>
 
    </div>
  </am-summary>
  
  <am-summary href="/blog/2012/03/31/match-encrypt-and-decrypt-in-php-and-nodejs" time="2012-03-31 00:20:00 +0800" slug="/blog/tags/%s" tags="[Web-Tech]">
    <a slot="title" href="/blog/2012/03/31/match-encrypt-and-decrypt-in-php-and-nodejs">Match encrypt &amp; decrypt in PHP and NodeJS</a>
    <div slot="summary"><style>img{max-width:100%}</style><p>String encoded in PHP needs to decode in NodeJS?</p>

<p>Or encoded in NodeJS needs to decode in PHP?</p>

<p>Here&rsquo;s a match result with aes-128-cbc &amp; their demo code, you could choose your 16 characters key &amp; a different iv(initial vector):</p>

<p>NodeJS</p>

<p>var crypto = require(&lsquo;crypto&rsquo;)
, key = &lsquo;abcdefghijklmnop&rsquo;
, iv = &lsquo;0123456789123456&rsquo;
, cipher = crypto.createCipheriv(&lsquo;aes-128-cbc&rsquo;, key, iv);</p>

<p>var text = &lsquo;Clipher Message&rsquo;
, crypted = cipher.update(text, &lsquo;utf-8&rsquo;, &lsquo;hex&rsquo;);</p>

<p>crypted += cipher.final(&lsquo;hex&rsquo;);</p>

<p>// encrypted
console.log(crypted);</p>

<p>var decipher = crypto.createDecipheriv(&lsquo;aes-128-cbc&rsquo;, key, iv)
, decrypted = decipher.update(crypted, &lsquo;hex&rsquo;, &lsquo;utf-8&rsquo;);</p>

<p>decrypted += decipher.final(&lsquo;utf-8&rsquo;);</p>

<p>// decrypted
console.log(decrypted);</p>
 
    </div>
  </am-summary>
  
</am-list>