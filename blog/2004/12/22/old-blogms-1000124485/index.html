
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Javascript之校验脚本  - Mindon.IDEA</title>
  <meta name="author" content="Mindon Feng">

  
  <meta name="description" content="BlogMS original blog key: 1000124485, blog id: airoff
History stat: 浏览/评论：234/2 , 日期：2004年12月22日 17:19 /* value validity relative javascript @date &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mindon.github.io/blog/2004/12/22/old-blogms-1000124485/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mindon.IDEA" type="application/atom+xml">
  
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Mindon.IDEA</a></h1>
  
    <h2>Air off, Mind on ~ / Javascript+Golang, Sci, Health&#8230; /</h2>
  
</hgroup>
<div id="google_translate_element" style="position:absolute;top:96px;right:16px;z-index:999999;opacity:0.3;+filter:Alpha(Opacity=30)"></div>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com" id="cse-search-box">
  <fieldset role="search">
    <input class="search" type="text" name="q" results="0"/>
    <input type="hidden" name="cx" value="partner-pub-6997921015773263:7607104621" />
    <input type="hidden" name="ie" value="UTF-8" />
  </fieldset>
</form>
<script type="text/javascript">
(function() {
  var job = document.createElement('script'); job.type = 'text/javascript'; job.async = true;
  job.src = 'http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en';
  var ss = document.getElementsByTagName('script'), s=ss[ss.length-1]; s.parentNode.insertBefore(job, s); s=null;
})();
</script>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a><sup><a href="/blog/archives">* Archives</a></sup></li>
  <li><a href="/blog/categories/chrome-app" title="Chrome Apps & Toolkits">Devel</a></li>
  <li><a href="/note">Note</a><sup><a href="/trouble">* Trouble/S</a></sup></li>
  <li><a href="/blog/categories/chinese-balance-heal"><img src="/images/coc.png" width="27" height="27" alt="C3" title="Chinese Balance Health Theory" border="0" align="absmiddle" /></a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Javascript之校验脚本</h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-12-22T17:19:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>



<div class="entry-content">

	<div class="adpost">
		<script type="text/javascript"><!--
		google_ad_client = "ca-pub-6997921015773263";
		/* git-post */
		google_ad_slot = "5984167509";
		google_ad_width = 300;
		google_ad_height = 250;
		//-->
		</script>
		<script type="text/javascript"
		src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
		</script>
	</div>
<A NAME="A,BODY"></A>
<p>BlogMS original blog key: 1000124485, blog id: airoff
History stat: 浏览/评论：234/2  ,  日期：2004年12月22日 17:19</p>

<p><code>
/* value validity relative javascript</p>

<ul>
<li><p>@date  03/20, 2003</p></li>
<li><p>@author  Rongjun Feng (derek.f)</p></li>
<li><p>@e-mail  iseasky@hotmail.com</p></li>
</ul>


<p>*/</p>

<p>var g_valid_func = new ValidFUNC();</p>

<p>var valid_error_message = &quot;&quot;;</p>

<p>var INVALID_USER_NAME = /\|\/|[|]|:|||&amp;lt;|&amp;gt;|+|\=|\;|\,|\?|*|&amp;|\%|`|^|.|&amp;quot;| /;</p>

<p>var INVALID_FILE_NAME = /\|\/|:|*|&amp;quot;|&amp;lt;|&amp;gt;||/;</p>

<p>var REXP_DIGITAL = /^\d+＄/;</p>

<p>var REXP_BLANK = /^\s*＄/;</p>

<p>var TIME_FORMAT = &quot;hh:mm:ss&quot;;</p>

<p>var TIME_RANGE = &quot;hh:00~23, mm:00~59, ss:00~59&quot;;</p>

<p>var DATE_FORMAT = &quot;YYYY-MM-DD&quot;;</p>

<p>var DATE_RANGE = &quot;YYYY:0000~9999, MM:01~12, DD:01~28/29/30/31&quot;;</p>

<p>var R_GE = &quot;大于等于 &quot;;</p>

<p>var R_LE = &quot;小于等于 &quot;;</p>

<p>var R_EQ = &quot;等于 &quot;;</p>

<p>var R_GT = &quot;大于 &quot;;</p>

<p>var R_LT = &quot;小于 &quot;;</p>

<p>var R_AND = &quot;并且&quot;;</p>

<p>var EMPTY_ERRM = &quot;不能为空&quot;;</p>

<p>var NONE_SELECTED_ERRM = &quot;请选择&quot;;</p>

<p>var INVALID_USER_NAME_ERRM = &quot;不能包含以下字符:\n| [ ] : &lt; &gt; + = ; , ? * / \ &amp; % ` ^ . &amp;quot; 空格&quot;;</p>

<p>var INVALUD_FILE_NAME_ERRM = &quot;不能包含以下字符:\n| \ / : * &amp;quot; &lt; &gt;&quot;;</p>

<p>var EXCLUDED_ERRM = &quot;不能取以下值:\n&quot;;</p>

<p>var NOT_INCLUDED_ERRM = &quot;只能取以下值:\n&quot;;</p>

<p>var NOT_LENGTH_ERRM = &quot;不符合串长度限制: &quot;;</p>

<p>var NOT_MAIL_ERRM = &quot;不符合电子邮箱格式: 需含@,且@前后至少各一字母&quot;;</p>

<p>var NOT_RANGE_ERRM = &quot;不符合串值范围限制: &quot;;</p>

<p>var DNOT_RANGE_ERRM = &quot;不符合数字值范围限制: &quot;;</p>

<p>var DNOT_HEX_ERRM = &quot;不符合十六进制数规格(0~9, A~F 或 a~f构成)&quot;;</p>

<p>var DNOT_LENGTH_ERRM = &quot;不符合数字串长度限制: &quot;;</p>

<p>var DNOT_TIME_ERRM = &quot;不符合有效时间格式: &quot;;</p>

<p>var DNOT_DATE_ERRM = &quot;不符合有效日期格式: &quot;;</p>

<p>function validERR(field, label)</p>

<p>// alert valid error message and return false</p>

<p>// @param :field, field handle id</p>

<p>// @param :label, field label</p>

<p>// @return  :false</p>

<p>{</p>

<p>var field, label;</p>

<p>var params = g_valid_func.params;</p>

<p>var message = &quot;&amp;quot;&quot; +label +&quot;&amp;quot; &quot;;</p>

<p>switch(g_valid_func.id) {</p>

<p>case 50000: //gEmpty</p>

<p>message += EMPTY_ERRM;</p>

<p>break;</p>

<p>case 50010: //gNotUserName</p>

<p>message += INVALID_USER_NAME_ERRM;</p>

<p>break;</p>

<p>case 50020: //gNotFileName</p>

<p>message += INVALID_FILE_NAME_ERRM;</p>

<p>break;</p>

<p>case 50030: //gExcluded</p>

<p>message += EXCLUDED_ERRM + params[1].join(&quot;, &quot;);</p>

<p>break;</p>

<p>case 50040: //gNotFilter</p>

<p>message += NOT_INCLUDED_ERRM + params[1].join(&quot;, &quot;);</p>

<p>break;</p>

<p>case 50050: //gNotLen</p>

<p>message += NOT_LENGTH_ERRM;</p>

<p>if(params[1] == &quot;0&quot; || params[1]) message += R_GE +params[1];</p>

<p>if(params[2] == &quot;0&quot; || params[2]) message += &quot;, &quot; +R_LE +params[2];</p>

<p>break;</p>

<p>case 50060: //gNotMail</p>

<p>message += NOT_MAIL_ERRM;</p>

<p>break;</p>

<p>case 50070: //gNotFit</p>

<p>message += NOT_RANGE_ERRM;</p>

<p>if(params[1] == &quot;0&quot; || params[1]) message += R_GE +params[1];</p>

<p>if(params[2] == &quot;0&quot; || params[2]) message += &quot;, &quot; +R_LE +params[2];</p>

<p>break;</p>

<p>case 60010: //dNotFit</p>

<p>message += DNOT_RANGE_ERRM;</p>

<p>if(params[1] == &quot;0&quot; || params[1]) message += R_GE +params[1];</p>

<p>if(params[2] == &quot;0&quot; || params[2]) message += &quot;, &quot; +R_LE +params[2];</p>

<p>break;</p>

<p>case 60020: //dNotHex</p>

<p>message += DNOT_HEX_ERRM;</p>

<p>break;</p>

<p>case 60030: //dNotLen</p>

<p>message += DNOT_LENGTH_ERRM;</p>

<p>if(params[1] == &quot;0&quot; || params[1]) message += R_GE +params[1];</p>

<p>if(params[2] == &quot;0&quot; || params[2]) message += &quot;, &quot; +R_LE +params[2];</p>

<p>break;</p>

<p>case 60040: //dNotTime</p>

<p>message += DNOT_TIME_ERRM +TIME_FORMAT +&quot;\n(&quot; +TIME_RANGE + &quot;)&quot;;</p>

<p>break;</p>

<p>case 60050: //dNotDate</p>

<p>message += DNOT_DATE_ERRM;</p>

<p>message += DATE_FORMAT.substr(params[1]?2:0) +&quot;\n(&quot; +DATE_RANGE.substr(params[1]?2:0) + &quot;)&quot;;</p>

<p>break;</p>

<p>case 60060: //dNotDateTime</p>

<p>message += DNOT_TIME_ERRM;</p>

<p>message += DATE_FORMAT.substr(params[2]?2:0) +(params[1]?params[1]:&quot;&quot;) +TIME_FORMAT;</p>

<p>message += &quot;\n(&quot; +DATE_RANGE.substr(params[2]?2:0) +&quot;)\n(&quot; +TIME_RANGE +&quot;)&quot;;</p>

<p>break;</p>

<p>case 90000: //gNone</p>

<p>message = NONE_SELECTED_ERRM +message;</p>

<p>break;</p>

<p>}</p>

<p>alert(message);</p>

<p>try{ field.focus() } catch(e) {};</p>

<p>return false;</p>

<p>}</p>

<p>function ValidFUNC()</p>

<p>// valid special character parameters</p>

<p>{</p>

<p>this.id = &quot;&quot;;</p>

<p>this.name = &quot;&quot;;</p>

<p>this.description = &quot;&quot;;</p>

<p>this.params = [];</p>

<p>this.set = set;</p>

<p>function set(id, params, name, description)</p>

<p>{</p>

<p>var id, params, name, description;</p>

<p>if(id) this.id = id;</p>

<p>if(params) this.params = params;</p>

<p>if(name) this.name = name;</p>

<p>if(description) this.description = description;</p>

<p>}</p>

<p>}</p>

<p>function s2d(v) { var n = new Number(v); return parseInt(isNaN(n)?0:n); }</p>

<p>function contains(varr, value)</p>

<p>// judge if a value is contained in a array</p>

<p>// @param :varr, value array</p>

<p>// @param :value, value string</p>

<p>// @return  :if value is in array, return true, else return false</p>

<p>{</p>

<p>var arrstr = varr.join(&quot;,&quot;);</p>

<p>if(arrstr.indexOf(&quot;,&quot;) &lt; 0) return (arrstr == value);</p>

<p>var index = arrstr.indexOf(value.toString());</p>

<p>var offset = value.toString().length;</p>

<p>var hok = (index == 0 || arrstr.substr(index -1, 1) == &quot;,&quot;);</p>

<p>var tok = (index == (arrstr.length - offset) || arrstr.substr(index +offset, 1) == &quot;,&quot;);</p>

<p>return (index&gt;=0 &amp;&amp; hok &amp;&amp; tok);</p>

<p>}</p>

<p>function gEmpty(value)</p>

<p>// check if the value only contains blank character</p>

<p>// @param :value, value being checked</p>

<p>// @return  :if only contains BLANK-charaters return true, else false</p>

<p>{</p>

<p>var value;</p>

<p>g_valid_func.set(50000, arguments, &quot;gEmpty&quot;, &quot;function gEmpty(value)&quot;);</p>

<p>if(!value &amp;&amp; value != &quot;0&quot;) return true;</p>

<p>return REXP_BLANK.test(value);</p>

<p>}</p>

<p>function gNotUserName(value)</p>

<p>// check if the name string is invalid</p>

<p>// @param :value, value being checked</p>

<p>// @return  :if name string invalid return true, else false</p>

<p>{</p>

<p>var value;</p>

<p>g_valid_func.set(50010, arguments, &quot;gNotUserName&quot;, &quot;function gNotUserName(value)&quot;);</p>

<p>if(!value) return true;</p>

<p>return INVALID_USER_NAME.test(value);</p>

<p>}</p>

<p>function gNotFileName(value)</p>

<p>// check if the filename string is invalid</p>

<p>// @param :value, value being checked</p>

<p>// @return  :if filename string invalid return true, else false</p>

<p>{</p>

<p>var value;</p>

<p>g_valid_func.set(50020, arguments, &quot;gNotFileName&quot;, &quot;function gNotFileName(value)&quot;);</p>

<p>if(!value) return true;</p>

<p>return INVALID_FILE_NAME.test(value);</p>

<p>}</p>

<p>function gExcluded(value, filter)</p>

<p>// check if the value is in the EXCLUDED-filter-array</p>

<p>// @param :value, value being checked</p>

<p>// @param :filter, excluded-filter-array</p>

<p>// @return  :if EXCLUDED return true, else false</p>

<p>{</p>

<p>var value, filter;</p>

<p>g_valid_func.set(50030, arguments, &quot;gExcluded&quot;, &quot;function gExcluded(value, filter)&quot;);</p>

<p>if(!filter || !filter.length) return false;</p>

<p>return(contains(filter, value));</p>

<p>}</p>

<p>function gNotFilter(value, filter)</p>

<p>// check if the value is NOT in the included-filter-array</p>

<p>// @param :value, value being checked</p>

<p>// @param :filter, included-filter-array</p>

<p>// @return  :if NOT included return true, else false</p>

<p>{</p>

<p>var value, filter;</p>

<p>g_valid_func.set(50040, arguments, &quot;gNotFilter&quot;, &quot;function gNotFilter(value, filter)&quot;);</p>

<p>if(!filter || !filter.length) return false;</p>

<p>return(!contains(filter, value));</p>

<p>}</p>

<p>function gNotLen(value, sLmin, sLmax)</p>

<p>// check if the string value length is NOT between sLmin and sLmax</p>

<p>// @param :value, value being checked</p>

<p>// @param :sLmin, the min limitation of string length</p>

<p>// @param :sLmax, the max limitation of string length</p>

<p>// @return  :if NOT fits the length limitation return true, else false</p>

<p>{</p>

<p>var value, sLmin, sLmax;</p>

<p>g_valid_func.set(50050, arguments, &quot;gNotLen&quot;, &quot;function gNotLen(value, sLmin, sLmax)&quot;);</p>

<p>var flag = false;</p>

<p>if(!value &amp;&amp; value != &quot;0&quot; &amp;&amp; value != &quot;&quot;) return !flag;</p>

<p>if(sLmin || sLmin == &quot;0&quot;) {</p>

<p>flag = (value.length &gt;= sLmin);</p>

<p>if(sLmax || sLmax == &quot;0&quot;) {</p>

<p>flag = (flag &amp;&amp; value.length &lt;= sLmax);</p>

<p>}</p>

<p>} else {</p>

<p>flag = true;</p>

<p>}</p>

<p>return !flag;</p>

<p>}</p>

<p>function gNotMail(value)</p>

<p>// check if the value is NOT a valid email address</p>

<p>// @param :value, value being checked</p>

<p>// @return  :if NOT a valid email return true, else false</p>

<p>{</p>

<p>var value;</p>

<p>g_valid_func.set(50060, arguments, &quot;gNotMail&quot;, &quot;function gNotMail(value)&quot;);</p>

<p>var rexp = /^[^@]+@[^@]+＄/g;</p>

<p>var flag = false;</p>

<p>var idx = value.indexOf(&quot;@&quot;);</p>

<p>if(idx &gt; 0) {</p>

<p>flag = (!gNotUserName(value.substring(0, idx)) &amp;&amp; rexp.test(value));</p>

<p>}</p>

<p>return !flag;</p>

<p>}</p>

<p>function gNotFit(value, smin, smax)</p>

<p>// check if the string value is NOT between smin and smax</p>

<p>// @param :value, value being checked</p>

<p>// @param :smin, the min string value limitation</p>

<p>// @param :smax, the max string  value limitation</p>

<p>// @return  :if NOT fits the string value limitation return true, else false;</p>

<p>{</p>

<p>var value, smin, smax;</p>

<p>g_valid_func.set(50070, arguments, &quot;gNotFit&quot;, &quot;function gNotFit(value, smin, smax)&quot;);</p>

<p>var flag = false;</p>

<p>if(!value &amp;&amp; value != &quot;0&quot; &amp;&amp; value !=&quot;&quot;)</p>

<p>return !flag;</p>

<p>if(smin || smin == &quot;0&quot; || smin ==&quot;&quot;)</p>

<p>flag = (value &gt;= smin);</p>

<p>if(smax || smax == &quot;0&quot; || smax ==&quot;&quot;)</p>

<p>flag = (flag &amp;&amp; value &lt;= dmax);</p>

<p>return !flag;</p>

<p>}</p>

<p>function dNotInt(value, type)</p>

<p>// check if the digital value is NOT proper type of integer</p>

<p>// @param :value, value being checked</p>

<p>// @return  :if NOT proper int type return true, else false;</p>

<p>{</p>

<p>var value, type;</p>

<p>if(!type) type = &quot;int&quot;;</p>

<p>switch(type.toLowerCase()) {</p>

<p>case &quot;int&quot;:</p>

<p>case &quot;short&quot;:</p>

<p>return dNotFit(value, -32768, 32767);</p>

<p>break;</p>

<p>case &quot;long&quot;:</p>

<p>return dNotFit(value, -2147483648, 2147483647);</p>

<p>break;</p>

<p>case &quot;ushort&quot;:</p>

<p>return dNotFit(value, 0, 65535);</p>

<p>break;</p>

<p>case &quot;ulong&quot;:</p>

<p>return dNotFit(value, 0, 4294967295);</p>

<p>break;</p>

<p>}</p>

<p>return true;</p>

<p>}</p>

<p>function dNotFit(value, dmin, dmax)</p>

<p>// check if the digital value is NOT between dmin and dmax</p>

<p>// @param :value, value being checked</p>

<p>// @param :dmin, the min value limitation</p>

<p>// @param :dmax, the max value limitation</p>

<p>// @return  :if NOT fits the value limitation return true, else false;</p>

<p>{</p>

<p>var value, dmin, dmax;</p>

<p>g_valid_func.set(60010, arguments, &quot;dNotFit&quot;, &quot;function dNotFit(value, dmin, dmax)&quot;);</p>

<p>var flag = false;</p>

<p>if(!value &amp;&amp; value != &quot;0&quot;) return !flag;</p>

<p>flag = !isNaN(value);</p>

<p>if(!dmin &amp;&amp; dmin != &quot;0&quot;) return !flag;</p>

<p>flag = (flag &amp;&amp; value &gt;= dmin);</p>

<p>if(!dmax &amp;&amp; dmax != &quot;0&quot;) return !flag;</p>

<p>flag = (flag &amp;&amp; value &lt;= dmax);</p>

<p>return !flag;</p>

<p>}</p>

<p>function dNotHex(value)</p>

<p>// check if the digital value is NOT hex value</p>

<p>// @param :value, value being checked</p>

<p>// @return  :if NOT hex value return true, else false;</p>

<p>{</p>

<p>var value;</p>

<p>g_valid_func.set(60020, arguments, &quot;dNotHex&quot;, &quot;function dNotHex(value)&quot;);</p>

<p>var rexp = /^[0-9a-fA-F]+＄/;</p>

<p>return !rexp.test(value);</p>

<p>}</p>

<p>function dNotLen(value, dLmin, dLmax)</p>

<p>// check if the digital string value length is NOT between dLmin and dLmax</p>

<p>// @param :value, value being checked</p>

<p>// @param :dLmin, the min limitation of string length</p>

<p>// @param :dLmax, the max limitation of string length</p>

<p>// @return  :if NOT fits the length limitation or contains NOT-digital-characters return true, else false;</p>

<p>{</p>

<p>var value, dLmin, dLmax;</p>

<p>g_valid_func.set(60030, arguments, &quot;dNotLen&quot;, &quot;function dNotLen(value, dLmin, dLmax)&quot;);</p>

<p>var flag = false;</p>

<p>if(!value &amp;&amp; value != &quot;0&quot;) return !flag;</p>

<p>var rexpstr = &quot;^\d&quot;;</p>

<p>if((!dLmin &amp;&amp; dLmin != &quot;0&quot;) || isNaN(dLmin)) {</p>

<p>rexpstr += &quot;+＄&quot;</p>

<p>} else {</p>

<p>rexpstr += &quot;{&quot; +dLmin +&quot;,&quot;;</p>

<p>if((!dLmax &amp;&amp; dLmax != &quot;0&quot;) || isNaN(dLmax)) {</p>

<p>rexpstr += &quot;}＄&quot;</p>

<p>} else {</p>

<p>rexpstr += dLmax +&quot;}＄&quot;;</p>

<p>}</p>

<p>}</p>

<p>var rexp = new RegExp(rexpstr);</p>

<p>flag = rexp.test(value);</p>

<p>return !flag;</p>

<p>}</p>

<p>function dNotTime(value)</p>

<p>// check if the value is NOT a time string</p>

<p>// @param :value, value being checked</p>

<p>// @return  :if NOT time string return true, else return false</p>

<p>{</p>

<p>var value;</p>

<p>g_valid_func.set(60040, arguments, &quot;dNotTime&quot;, &quot;function dNotTime(value)&quot;);</p>

<p>var rexp = /[^\d]+/; // detect delimiter string</p>

<p>if(!value) return true;</p>

<p>var delimiter = value.match(rexp);</p>

<p>if(delimiter) {</p>

<p>delimiter = delimiter.toString();</p>

<p>var dlen = delimiter.length;</p>

<p>if(value.indexOf(delimiter) != 2) return true;</p>

<p>value = value.substr(0,2) + value.substr(2 +dlen, 2) + value.substr(4 +2*dlen, 2);</p>

<p>}</p>

<p>var tarr = [];</p>

<p>for(var k=0; k&lt;3; k++) {</p>

<p>tarr[k] = value.substr(2*k, 2);</p>

<p>if(isNaN(tarr[k])) return true;</p>

<p>tarr[k] = s2d(tarr[k]);</p>

<p>}</p>

<p>if(tarr[0] &lt; 0 || tarr[0] &gt;= 24</p>

<p>|| tarr[1] &lt; 0 || tarr[1] &gt;= 60</p>

<p>|| tarr[2] &lt; 0 || tarr[2] &gt;= 60) {</p>

<p>return true;</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>function dNotDate(value, y2d)</p>

<p>// check if the value is NOT a date string</p>

<p>// @param :value, value being checked</p>

<p>// @param :y2d, two digital year flag</p>

<p>// @return  :if NOT date string return true, else return false</p>

<p>{</p>

<p>var value, y2d;</p>

<p>g_valid_func.set(60050, arguments, &quot;dNotDate&quot;, &quot;function dNotDate(value, y2d)&quot;);</p>

<p>var rexp = /[^\d]+/; // detect delimiter string</p>

<p>if(!value) return true;</p>

<p>var delimiter = value.match(rexp);</p>

<p>var YRW = 4;</p>

<p>if(y2d) YRW = 2;</p>

<p>if(delimiter) {</p>

<p>delimiter = delimiter.toString();</p>

<p>var dlen = delimiter.length;</p>

<p>if(value.indexOf(delimiter) != YRW) return true;</p>

<p>value = value.substr(0,YRW) + value.substr(YRW +dlen, 2) + value.substr(YRW +2 +2*dlen, 2);</p>

<p>}</p>

<p>var tarr = [];</p>

<p>try {</p>

<p>for(var k=0; k&lt;3; k++) {</p>

<p>tarr[k] = value.substr((k==0?0:(YRW +2*(k-1))), (k==0?YRW:2));</p>

<p>tarr[k] = new Number(tarr[k]);</p>

<p>//tarr[k] = s2d(tarr[k]);</p>

<p>if(y2d &amp;&amp; k==0) tarr[k] = 1900 +tarr[k]; //year 2 digital process</p>

<p>}</p>

<p>} catch(e) { return true; }</p>

<p>var cd = new Date(tarr[0], tarr[1] -1, tarr[2]);</p>

<p>var dfit = (cd.getFullYear() == tarr[0]);</p>

<p>dfit = (dfit &amp;&amp; cd.getMonth() == tarr[1] -1);</p>

<p>dfit = (dfit &amp;&amp; cd.getDate() == tarr[2]);</p>

<p>if(!dfit) return true;</p>

<p>/*//</p>

<p>var febdays = ((tarr[0]%4 == 0) &amp;&amp; (tarr[0]%100 != 0) || (tarr[0]%400 == 0))?29:28;</p>

<p>var mdarr = new Array(31,febdays,31,30,31,30,31,31,30,31,30,31);</p>

<p>if(tarr[0] &lt; 0</p>

<p>|| tarr[1] &lt; 1 || tarr[1] &gt; 12</p>

<p>|| tarr[2] &lt; 1 || tarr[2] &gt; mdarr[tarr[1] -1]) {</p>

<p>return true;</p>

<p>}</p>

<p>//*/</p>

<p>return false;</p>

<p>}</p>

<p>function dNotDateTime(value, delimiter, y2d)</p>

<p>// check if the value is NOT a datetime string</p>

<p>// @param :value, value being checked</p>

<p>// @param :delimiter, delimiter between date string and time string</p>

<p>// @param :y2d, two digital year flag</p>

<p>// @return  :if NOT datetime string return true, else return false</p>

<p>{</p>

<p>var value, delimiter, y2d;</p>

<p>g_valid_func.set(60060, arguments, &quot;dNotDateTime&quot;, &quot;function dNotDateTime(value, delimiter, y2d)&quot;);</p>

<p>if(!value) return true;</p>

<p>if(!delimiter) delimiter = &quot;&quot;;</p>

<p>var datestr, timestr;</p>

<p>var DTW = 8;</p>

<p>if(y2d) DTW = 6;</p>

<p>if(!delimiter) {</p>

<p>datestr = value.substr(0, DTW);</p>

<p>timestr = value.substr(DTW, 6);</p>

<p>} else {</p>

<p>var dpos = value.indexOf(delimiter);</p>

<p>datestr = value.substring(0, dpos);</p>

<p>timestr = value.substring(dpos +delimiter.length, value.length);</p>

<p>}</p>

<p>return (dNotDate(datestr, y2d) || dNotTime(timestr));</p>

<p>}</p>

<p>function gNone(field)</p>

<p>// check if value has been set by selection</p>

<p>// @param :field, field to be check</p>

<p>{</p>

<p>var field;</p>

<p>g_valid_func.set(90000, arguments, &quot;gNone&quot;, &quot;function gNone(field)&quot;);</p>

<p>if(field.type &amp;&amp; field.type == &quot;select-one&quot; &amp;&amp; field.value==&quot;&quot;) return true;</p>

<p>if(field.type &amp;&amp; field.type == &quot;checkbox&quot;) return (field.checked?false:true);</p>

<p>if(!field.type &amp;&amp; field.length) {</p>

<p>for(var k=0; k&lt;field.length; k++) {</p>

<p>if(field[k].checked) return false;</p>

<p>}</p>

<p>return true;</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p></code></p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mindon Feng</span></span>

      








  


<time datetime="2004-12-22T17:19:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/blogms/'>blogms</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2004/12/22/old-blogms-1000124479/" title="Previous Post: Javascript之取消 ">&laquo; Javascript之取消 </a>
      
      
        <a class="basic-alignment right" href="/blog/2004/12/22/old-blogms-1000124591/" title="Next Post: 纳米技术遭遇反科学思潮挑战 ">纳米技术遭遇反科学思潮挑战  &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
    <h1>About Me</h1>
    <img src="/images/mindon.png" width="128" height="128" alt="Mindon" />
    <p>麥盾, <a title="mindon/!at/gmail/!dot/com" href="/about/">Mindon</a> | <a id="mydonate" name="donate" href="#donate" title="Inspire Me! Thanks"><b>Donate!</b></a>
    <br />Web Developer, @10c</p>
</section>
<form id="fmdonate" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" style="display:none">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="HCJSW6U8PUNEJ">
</form>
<script>
function idonate(key) {
  var fm = document.getElementById('fmdonate');
  fm['hosted_button_id'].value = key;
  fm.submit();
}
document.getElementById('mydonate').onclick = function(){
  idonate('YSVEJMBLM3AFG');
};
</script>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/108546803797935855689?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Categories</h1>
  <ul>

    <li>&raquo; <a class='category' href="/blog/categories/blogms/">blogms</a> ( 308 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/mindon/">mindon</a> ( 87 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/web-tech/">web-tech</a> ( 33 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/light-air-water-m-sci/">light-air-water-m-sci</a> ( 14 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/readings/">readings</a> ( 13 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/chinese-balance-heal/">chinese-balance-heal</a> ( 8 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/chrome-app/">chrome-app</a> ( 12 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/mobile-app/">mobile-app</a> ( 16 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/mindon,/">mindon,</a> ( 1 )</li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/11/09/dji-phantom-the-future-of-possible/">DJI - The Future of Possible</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/09/two-bugs-found-in-jekyll/">Two problems found in Jekyll when using Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/08/shortcuts-for-linux-console/">Shortcuts for Linux console</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/19/happy-angry-and-worries/">开心，怒气和烦恼</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/19/my-next-mobile-phone-and-blackberry-10-dot-3/">My Next Mobile Phone and BlackBerry 10.3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/18/dust-in-a-old-building/">那些恼人的尘灰</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/23/about-xishaoye-roujiamo/">西少爷.肉夹馍，开分店啦</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/23/seeing-is-not-always-believable/">Seeing is Not Always Believable</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/22/the-programming-language-swift/">The Programming Language: Swift</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/10/wordpress-golang-and-swift/">WordPress, Golang & Swift</a>
      </li>
    
  </ul>
</section>



<section>
    <h1>Google廣告</h1>
	<script type="text/javascript"><!--
	google_ad_client = "ca-pub-6997921015773263";
	/* git-aside */
	google_ad_slot = "4887341949";
	google_ad_width = 250;
	google_ad_height = 250;
	//-->
	</script>
	<script type="text/javascript"
	src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
	</script>
</section><section>
    <h1>Links</h1>
	<ul>
		<li><a href="http://www.ted.com/" target="_blank">TED: Ideas worth spreading</a></li>
		<li><a href="http://www.sciencemag.org/" target="_blank">Science Magazine</a></li>
		<li><a href="http://www.spongelab.com/browse/" target="_blank" title="Search science topics, lesson plans, case studies and more">SpongeLab</a></li>
		<li><a href="http://catlinseaviewsurvey.com/seaview.htm" target="_blank">Sea View Survey</a></li>
		<li><a href="http://www.me.gatech.edu/hu/" target="_blank">Hoogle</a></li>
		<li><b>傳統中醫 TCM</b>
    <ul>
      <li><a href="http://jicheng.tw/jcw/" target="_blank">笈成資料庫</a></li>
      <li><a href="http://www.cmchk.org.hk/pcm/chi/" target="_blank">香港中醫藥管理委員會</a></li>
      <li><a href="http://tcm.cmu.edu.tw/zh-tw/" target="_blank">中醫藥資料庫@Taiwan</a></li>
      <li><a href="http://www.relativehumanity.com.tw/web/chinesemedicine.htm" target="_blank">中醫世界</a> | <a href="http://www.relativehumanity.com.tw/web/main01.htm" target="_blank">身與心的平衡</a></li>
    </ul>
    </li>
		<li><b>Readings Around</b>
    <ul>
      <li><a href="http://yeeyan.org/" target="_blank">译言网</a></li>
    </ul>
    </li>
		<li><b>Development</b>
    <ul>
      <li><a href="http://commondatastorage.googleapis.com/chromium-browser-continuous/index.html" target="_blank">Chrome Latest Build</a></li>
      <li><a href="http://snapsvg.io/" target="_blank">SnapSVG</a></li>
      <li><a href="http://www.cocos2d-iphone.org/" target="_blank">COCOS2D</a></li>
    </ul>
    </li>
		<li><b>Friends</b>
    <ul>
      <li><a href="http://askcuix.github.io" target="_blank">Chris&#8217;s Blog</a></li>
      <li><a href="http://justinyan.me" target="_blank">枫言枫语</a></li>
    </ul>
    </li>
		<li><a href="http://blog.sina.com.cn/aby" target="_blank">Aby.生活</a> | <a href="http://weibo.com/imaby" target="_blank">微博</a></li>
		<li><a href="http://mindon.appspot.com/" target="_blank">Mindon.IDEA</a> @GAE  | <a href="http://weibo.com/mindon" target="_blank">微博</a></li>
		<li>PHOTO @<a href="https://picasaweb.google.com/mindon" target="_blank">Picasa</a> | @<a href="http://www.flickr.com/photos/mindon/" target="_blank">Flickr</a> | @<a href="http://photos.nphoto.net/mindon/" target="_blank">NPhoto</a></li>
		<li>@<a href="http://pinterest.com/mindon/" target="_blank">Pinterest</a> | <a href="http://db.tt/eYIbyv7" target="_blank">DropxBox</a></li>
		<li><a href="http://www.hk-rfid.com/" target="_blank" title="Hong Kong RFID Limited is the leading RFID hardware manufacturer, distributor and consultancy firm in Hong Kong and the South China Region."><img src="/images/HKRFID-logo.png" border="0" alt="Hong Kong RFID" /></a></li>
	</ul>
</section>
<section>
    <h1>Learn More</h1>
	<ul>
		<li><a href="http://www.20thingsilearned.com/zh-CN" target="_blank" title="About Browsers & The Web: 关于浏览器和网络的 20 个知识点">Things I Learned</a></li>
		<li><a href="http://www.google.com/intl/zh-CN/goodtoknow/" target="_blank" title="安全健康上网">Good To Know</a></li>
		<li><a href="http://open.163.com/ted" target="_blank">网易公开课 - TED演讲</a></li>
	</ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Mindon Feng -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<script src="/javascripts/modernizr-2.6.2.js"></script>
<script src="/javascripts/ender.js"></script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28048168-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<script>
;!function(e,t,r){var n='getElementsByTagName',f=e[n](t)[0]||e[n]('script')[0],x=e.styleSheets;for(var s,c;(s=r.shift())&&(c=e.createElement(t));){c.rel='stylesheet';c.href=s.length==2?s[0]:s;c.media='only x';f.parentNode.insertBefore(c,f);m(c,s,0)}function m(c,s){var d,i;for(i=0;i<x.length;i++){if(x[i].href&&x[i].href.indexOf(s[0])>-1){d=1}if(d){c.media=s.length==2?s[1]:'all'}else{setTimeout(function(){m(c,s)},50)}}}}(document,'link',[
  'http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic'
 ,'http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic'
]);
function js(src){
var job = document.createElement('script'); job.type = 'text/javascript'; job.async = true;
  job.src = src; var ss = document.getElementsByTagName('script'), s=ss[ss.length-1]; s.parentNode.insertBefore(job, s); ss=s=null;
}
$(document).ready(function(){if($('#more-tips').length) $('#more-tips').remove(); if($('#link-tags').length) js('/javascripts/mindon-tags.js')})</script>

<script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    multilanguagePage: true,
    gaTrack: true,
    gaId: 'UA-28048168-2',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
// skip IE translate
!document.attachEvent && (function() {
  js('http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit');
})();
</script>



</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mindon';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://mindon.github.io/blog/2004/12/22/old-blogms-1000124485/';
        var disqus_url = 'http://mindon.github.io/blog/2004/12/22/old-blogms-1000124485/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>







</body>
</html>
