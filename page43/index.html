
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mindon.IDEA</title>
  <meta name="author" content="Mindon Feng">

  
  <meta name="description" content="BlogMS original blog key: 1000153900, blog id: airoff
History stat: 浏览/评论：378/1 , 日期：2005年1月17日 08:53 南亚的海啸大灾难刚发生时候， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mindon.github.io/page43/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mindon.IDEA" type="application/atom+xml">
  
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Mindon.IDEA</a></h1>
  
    <h2>Air off, Mind on ~ / Javascript+Golang, Sci, Health&#8230; /</h2>
  
</hgroup>
<div id="google_translate_element" style="position:absolute;top:96px;right:16px;z-index:999999;opacity:0.3;+filter:Alpha(Opacity=30)"></div>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.google.com" id="cse-search-box">
  <fieldset role="search">
    <input class="search" type="text" name="q" results="0"/>
    <input type="hidden" name="cx" value="partner-pub-6997921015773263:7607104621" />
    <input type="hidden" name="ie" value="UTF-8" />
  </fieldset>
</form>
<script type="text/javascript">
(function() {
  var job = document.createElement('script'); job.type = 'text/javascript'; job.async = true;
  job.src = 'http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en';
  var ss = document.getElementsByTagName('script'), s=ss[ss.length-1]; s.parentNode.insertBefore(job, s); s=null;
})();
</script>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a><sup><a href="/blog/archives">* Archives</a></sup></li>
  <li><a href="/blog/categories/chrome-app" title="Chrome Apps & Toolkits">Devel</a></li>
  <li><a href="/note">Note</a><sup><a href="/trouble">* Trouble/S</a></sup></li>
  <li><a href="/blog/categories/chinese-balance-heal"><img src="/images/coc.png" width="27" height="27" alt="C3" title="Chinese Balance Health Theory" border="0" align="absmiddle" /></a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/01/17/old-blogms-1000153900/">灾难杂想</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-17T08:53:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>BlogMS original blog key: 1000153900, blog id: airoff
History stat: 浏览/评论：378/1  ,  日期：2005年1月17日 08:53</p>

<p>南亚的海啸大灾难刚发生时候，不经意看到一个很少看的频道里一个讲述一个关于洋流变化导致全球气候变化的猜想。当时我还以为是说南亚地震海啸可能导致的情况呢。但我当时就想会不会由于这样的一次海底地震而影响到全球的气候呢？</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2005/01/17/old-blogms-1000153900/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/01/17/old-blogms-1000153899/">正在过期</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-17T08:53:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>BlogMS original blog key: 1000153899, blog id: airoff
History stat: 浏览/评论：188/3  ,  日期：2005年1月17日 08:53</p>

<p>不知什么时候，察觉自己与现在很多年青人之间似乎存在代沟了。或许因为我的思维方式拒绝跟上时代脚步的节奏。但我绝对不保守，因为自己的接受能力和理解能力是从未曾受过丝毫质疑的——但是什么让我产生了正在过期的感觉呢？</p>

<p>或许因为我的语言中用了太多的自己，用了太多的或许和可能，用了太多的我想和假若。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2005/01/17/old-blogms-1000153899/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/01/17/old-blogms-1000153898/">新三点一线的生活</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-17T08:52:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>BlogMS original blog key: 1000153898, blog id: airoff
History stat: 浏览/评论：482/4  ,  日期：2005年1月17日 08:52</p>

<p>从学校出来后，宿舍-饭堂-教室的三点一线就开始转化了，逐渐成为了住处-快餐店-公司三点一线了。然而，视线离不开电脑-电视-书这样的三点一线则是难以挣脱的，对生活习惯的影响也是更为深远的。</p>

<p>电脑，因为工作需要天天盯着，所以是没办法避免的时间消耗。有时候回家后也会偶尔用一下电脑，编点自己兴趣的程序或者整理一些想法，或者是整理新拍的照片，或是玩玩一些小游戏，或是画些小图标和做些非设计类的flash界面之类的，当然有时也会写些随感。因为不想把自己和电脑捆绑起来，所以一直没有装电话和ADSL（上个星期还是申请了，不过还没给我装），所以没变成网虫。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2005/01/17/old-blogms-1000153898/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/01/07/old-blogms-1000142164/">Allie Narrations in 《Taken》</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-07T13:27:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>BlogMS original blog key: 1000142164, blog id: airoff
History stat: 浏览/评论：483/0  ,  日期：2005年1月7日 13:27</p>

<p><b>M</b>y mother always talked to me a lot about the sky. She liked to watch the clouds in the day and the stars at night&#8230;especially the stars. We would play a game sometimes; a game called &quot;What&#8217;s Beyond the Sky?&quot; We would imagine darkness or a blinding light or something else that we didn&#8217;t know how to name. But of course, that was just a game. There&#8217;s nothing beyond the sky. The sky just is, and it goes on and on, and we play all of our games beneath it.</p>

<p><b>P</b>eople are lonely in this world for lots of different reasons. Some people have something in their disposition. Maybe they were just born too mean, or maybe they were born too tender. But most people are brought to where they are by circumstance, by calamity or a broken heart or something else happening in their lives that wasn&#8217;t anything they planned on. People are lonely in this world for lots of different reasons. The one thing that I do know is, it doesn&#8217;t matter what any one of them might tell you&#8211;nobody wants to be alone.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2005/01/07/old-blogms-1000142164/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/01/07/old-blogms-1000141979/">Use XML & XPath in Flash</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-07T11:01:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>BlogMS original blog key: 1000141979, blog id: airoff
History stat: 浏览/评论：260/0  ,  日期：2005年1月7日 11:01</p>

<p><font color=#00008B><font size=2 style="line-height:14pt"></p>

<p>/* mindon actionscript for flash 7.0 or upper</p>

<ul>
<li><p>@date    07/29, 2004</p></li>
<li><p>@author      Feng Rongjun from Shenzhen China</p></li>
<li><p>@e-mail      iseasky@hotmail.com</p></li>
</ul>


<p>*/</p>

<p>import com.xfactorstudio.xml.xpath.*;</p>

<p>/<em> load xml into a textarea component with stylesheet </em>/</p>

<p>function styleXML(areatxt, xmlfile, cssfile)</p>

<p>{</p>

<p>var areatxt, xmlfile, cssfile;</p>

<p>try {</p>

<p>//init TextArea component</p>

<p>areatxt.html = true;</p>

<p>areatxt.wordWrap = true;</p>

<p>areatxt.multiline = true;</p>

<p>areatxt.label.condenseWhite=true;</p>

<p>//load css</p>

<p>if(cssfile) {</p>

<p>var csstyle = new TextField.StyleSheet();</p>

<p>csstyle.load(cssfile);</p>

<p>areatxt.styleSheet = csstyle;</p>

<p>}</p>

<p>//load XML CONTENT</p>

<p>if(xmlfile) {</p>

<p>var xmlc = new XML();</p>

<p>xmlc.ignoreWhite = false;</p>

<p>xmlc.load(xmlfile);</p>

<p>xmlc.onLoad = function(success) {</p>

<p>if(success) {</p>

<p>areatxt.text = xmlc;</p>

<p>}</p>

<p>}</p>

<p>}</p>

<p>} catch(e) {</p>

<p>trace(e.description);</p>

<p>}</p>

<p>}</p>

<p>/<em> load xml file </em>/</p>

<p>_global.xmldocs = {};</p>

<p>function loadXML(xmlfile, xmlfunc)</p>

<p>{</p>

<p>var xmlfile, xmlfunc;</p>

<p>try {</p>

<p>if(xmlfile &amp;&amp; xmlfunc &amp;&amp; typeof xmlfunc == &quot;function&quot;) {</p>

<p>var xmlc = new XPathDocument();</p>

<p>xmlc.ignoreWhite = false;</p>

<p>xmlc.load(xmlfile);</p>

<p>xmlc.onLoad = function(success) {</p>

<p>if(success) {</p>

<p>xmldocs[xmlfile] = this;</p>

<p>xmlfunc(this);</p>

<p>}</p>

<p>}</p>

<p>}</p>

<p>} catch(e) {</p>

<p>trace(e.description);</p>

<p>}</p>

<p>}</p>

<p>//*/ loader example</p>

<p>function xmlLoader(xdoc)</p>

<p>{</p>

<p>var xdoc;</p>

<p>if(xdoc) {</p>

<p>var nod = xdoc.selectSingleNode(&quot;/mindon/name&quot;);</p>

<p>if(nod) {</p>

<p>if(String(nod.stringValue())==&quot;derek.f&quot;) {</p>

<p>trace(&quot;true&quot;);</p>

<p>} else {</p>

<p>trace(nod.stringValue());</p>

<p>}</p>

<p>} else {</p>

<p>trace(&quot;cannot find node mindon/name&quot;);</p>

<p>}</p>

<p>} else {</p>

<p>trace(&quot;xml read fail&quot;);</p>

<p>}</p>

<p>}</p>

<p>//*/</p>

<p></font></font></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/01/07/old-blogms-1000141972/">Corel Draw Script</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-07T10:57:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>BlogMS original blog key: 1000141972, blog id: airoff
History stat: 浏览/评论：424/0  ,  日期：2005年1月7日 10:57</p>

<p>REM 90 Deg. Swirl with 10 step blend      Font used: AvantGarde Bk BT</p>

<p>WITHOBJECT &quot;CorelDraw.Automation.10&quot;</p>

<pre><code>.StartOfRecording 

.SuppressPainting 

.RecorderStorePreselectedObjects TRUE
</code></pre>

<p>REM 选择物体</p>

<pre><code>.RecorderSelectObjectByIndex TRUE, 1
</code></pre>

<p>REM 旋转 Angel,,Center H,Center V</p>

<pre><code>.RotateObject 90000000, TRUE, 0, 0
</code></pre>

<p>REM 拷贝</p>

<pre><code>.DuplicateObject 20000,30000
</code></pre>

<p>REM .ApplyLensEffect 10, FALSE, FALSE, FALSE, 0, 0, 500</p>

<pre><code>.ApplyLensEffect 0, TRUE, TRUE, FALSE, 22061944, 1242708, 20971701
</code></pre>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2005/01/07/old-blogms-1000141972/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2005/01/07/old-blogms-1000141910/">Struts ActionForm字段校验(JAVA)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-01-07T10:05:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>BlogMS original blog key: 1000141910, blog id: airoff
History stat: 浏览/评论：392/0  ,  日期：2005年1月7日 10:05</p>

<p><code></p>

<p>package com.mindon.util;</p>

<p>/**============================================================</p>

<ul>
<li><p>文件： com.mindon.util.FieldCheck</p></li>
<li><p>功能： 校验函数库</p></li>
<li><p>所含类:FieldCheck</p></li>
<li><p>修改记录：</p></li>
<li><p>日期                作者           内容</p></li>
<li><hr /></li>
<li><p>2003-11-17         fengrj          校验函数</p></li>
<li><p>============================================================*/</p></li>
</ul>


<p>import org.apache.struts.action.*;</p>

<p>import javax.servlet.http.*;</p>

<p>import java.lang.StringBuffer;</p>

<p>import java.util.Date;</p>

<p>import org.jdom.*;</p>

<p>import org.jdom.input.*;</p>

<p>import org.jdom.output.*;</p>

<p>import java.io.File;</p>

<p>import java.io.IOException;</p>

<p>import java.util.HashMap;</p>

<p>public class FieldCheck {</p>

<p>private ActionErrors errors = null;</p>

<p>private HttpServletRequest request = null;</p>

<p>private String moduleName;</p>

<p>private static String errorURL = &quot;org.apache.struts.action.ERROR&quot;;</p>

<p>private static String confName = &quot;./definition.xml&quot;;</p>

<p>private static HashMap xMRootMap = new HashMap();</p>

<p>public static String L_CONFIRM = &quot;.confirm&quot;;</p>

<p>public static String L_SELECT_NONE = &quot;.selectNone&quot;;</p>

<p>public static String L_DUPLICATE = &quot;.duplicate&quot;;</p>

<p>public static String L_EXISTENT = &quot;.existent&quot;;</p>

<p>public static String L_INEXISTENT = &quot;.inexistent&quot;;</p>

<p>public static String L_LOGIN = &quot;.login&quot;;</p>

<p>public static String L_LOOP = &quot;.loop&quot;;</p>

<p>public static String L_FAIL = &quot;.fail&quot;;</p>

<p>public static String L_REQUIRED = &quot;.required&quot;;</p>

<p>public static String L_NEEDONE = &quot;.needone&quot;;</p>

<p>public static String L_FALSE_LENGTH = &quot;.falseLength&quot;;</p>

<p>public static String L_CHOOSE_NONE = &quot;.needed&quot;;</p>

<p>public static String L_OVERFLOW = &quot;.overflow&quot;;</p>

<p>public static String L_DIFFERENT = &quot;.different&quot;;</p>

<p>public static String L_FALSE_NUMBER = &quot;.fasleNumber&quot;;</p>

<p>public static String L_INT_NEEDED = &quot;.intNeeded&quot;;</p>

<p>public static String L_DOUBLE_NEEDED = &quot;.doubleNeeded&quot;;</p>

<p>public static String L_FALSE_DATE = &quot;.falseDate&quot;;</p>

<p>public static String L_BEFORE_DATE = &quot;.beforeDate&quot;;</p>

<p>public static String L_AFTER_DATE = &quot;.afterDate&quot;;</p>

<p>public static String L_FALSE_RATE = &quot;.falseRate&quot;;</p>

<p>public static String L_FALSE_RANGE = &quot;.falseRange&quot;;</p>

<p>public static String L_FALSE_IDCARD = &quot;.falseIdCard&quot;;</p>

<p>private static java.text.SimpleDateFormat datefmt = new java.text.SimpleDateFormat(&quot;yyyy年M月dd日&quot;);</p>

<p>public FieldCheck(ActionErrors errors,</p>

<p>HttpServletRequest request,</p>

<p>String moduleName)</p>

<p>{</p>

<p>this.errors = errors;</p>

<p>this.request = request;</p>

<p>this.moduleName = moduleName;</p>

<p>}</p>

<p>public static boolean error(ActionErrors errors,</p>

<p>HttpServletRequest request,</p>

<p>String label,</p>

<p>StringBuffer message)</p>

<p>{</p>

<p>StringBuffer url = (new StringBuffer(&quot;error&quot;)).append(label);</p>

<p>errors.add(label.substring(1), new ActionError(url.toString(), message.toString()));</p>

<p>request.setAttribute(errorURL, errors);</p>

<p>return true;</p>

<p>}</p>

<p>public static boolean error(ActionErrors errors,</p>

<p>HttpServletRequest request,</p>

<p>String label,</p>

<p>String module)</p>

<p>{</p>

<p>return error(errors, request, label, module, null, null);</p>

<p>}</p>

<p>public static boolean error(ActionErrors errors,</p>

<p>HttpServletRequest request,</p>

<p>String label,</p>

<p>String module,</p>

<p>String name)</p>

<p>{</p>

<p>return error(errors, request, label, module, name, null);</p>

<p>}</p>

<p>public static boolean error(ActionErrors errors,</p>

<p>HttpServletRequest request,</p>

<p>String label,</p>

<p>String module,</p>

<p>String name,</p>

<p>String extdesc)</p>

<p>{</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt;Error:&quot; +module +(null!=name?&quot;-&quot;+name:&quot;&quot;));</p>

<p>StringBuffer url = (new StringBuffer(&quot;error&quot;)).append(label);</p>

<p>errors.add(null!=name?name:module, new ActionError(url.toString(), description(module, name), extdesc));</p>

<p>request.setAttribute(errorURL, errors);</p>

<p>return true;</p>

<p>}</p>

<p>public boolean isEmpty(String name)</p>

<p>{</p>

<p>if(null==request.getParameter(name)</p>

<p>|| &quot;&quot;.equals(request.getParameter(name))) {</p>

<p>return true;</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>// 带参校验函数 ---&gt;&gt;&gt; 开始</p>

<p>public boolean isEmpty(String field, Object value)</p>

<p>{</p>

<p>if(null == value || value.toString().length() &lt; 1) {</p>

<p>return error(L_REQUIRED, field, description(field));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean falseLength(String field, Object value, int maxLength)</p>

<p>{</p>

<p>if(!isEmpty(field) &amp;&amp; value.toString().length() &gt; maxLength) {</p>

<p>return error(L_FALSE_LENGTH, field, description(field), &quot;(&quot; +maxLength +&quot;)&quot;);</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean falseNumber(String field, Object value)</p>

<p>{</p>

<p>if(!isEmpty(field) &amp;&amp; null == value) {</p>

<p>return error(L_FALSE_NUMBER, field, description(field));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean intNeeded(String field, Object value)</p>

<p>{</p>

<p>if(!isEmpty(field) &amp;&amp; null == value) {</p>

<p>return error(L_INT_NEEDED, field, description(field));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean doubleNeeded(String field, Object value)</p>

<p>{</p>

<p>if(!isEmpty(field) &amp;&amp; null == value) {</p>

<p>return error(L_DOUBLE_NEEDED, field, description(field));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean overflow(String field, Double value, double limit, int precision)</p>

<p>{</p>

<p>if(isEmpty(field)) return false;</p>

<p>int dot = -1;</p>

<p>String param = request.getParameter(field);</p>

<p>if(null != value) dot = param.indexOf(&quot;.&quot;);</p>

<p>if(null != value &amp;&amp; (value.doubleValue() &gt; limit</p>

<p>|| (dot&gt;=0 &amp;&amp; precision &lt; param.length() -dot -1))) {</p>

<p>String limitstr = Double.toString(limit);</p>

<p>String extdesc = &quot;(&quot; +(Integer.parseInt(limitstr.substring(limitstr.indexOf(&quot;E&quot;) +1)) +precision) +&quot;,&quot; +precision +&quot;)&quot;;</p>

<p>return error(L_OVERFLOW, field, description(field), extdesc);</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean chooseNone(String field, Object value)</p>

<p>{</p>

<p>if(null == value || value.toString().length() &lt; 1) {</p>

<p>return error(L_CHOOSE_NONE, field, description(field));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean different(String field, Object value, Object origin)</p>

<p>{</p>

<p>if(isEmpty(field, origin)) return true;</p>

<p>if(!origin.equals(value)) {</p>

<p>return error(L_DIFFERENT, field, description(field), origin.toString());</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean different(String field, Object value, String olabel, Object origin)</p>

<p>{</p>

<p>if(isEmpty(field, origin)) return true;</p>

<p>if(!origin.equals(value)) {</p>

<p>return error(L_DIFFERENT, field, description(field), description(olabel));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean falseDate(String field, Object value)</p>

<p>{</p>

<p>if(!isEmpty(field) &amp;&amp; null == value) {</p>

<p>return error(L_FALSE_DATE, field, description(field));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean beforeDate(String field, Date base, Date date)</p>

<p>{</p>

<p>if(!isEmpty(field) &amp;&amp; null != base &amp;&amp; null != date) {</p>

<p>base.setHours(0); base.setMinutes(0); base.setSeconds(0);</p>

<p>date.setHours(0); date.setMinutes(0); date.setSeconds(0);</p>

<p>if(base.compareTo(date)&gt;0) return error(L_BEFORE_DATE, field, description(field), datefmt.format(base));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean afterDate(String field, Date base, Date date)</p>

<p>{</p>

<p>if(!isEmpty(field) &amp;&amp; null != base &amp;&amp; null != date) {</p>

<p>base.setHours(0); base.setMinutes(0); base.setSeconds(0);</p>

<p>date.setHours(0); date.setMinutes(0); date.setSeconds(0);</p>

<p>if(base.compareTo(date)&lt;0) return error(L_AFTER_DATE, field, description(field), datefmt.format(base));</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean beforeToday(String field, Date date)</p>

<p>{</p>

<p>return beforeDate(field, new Date(), date);</p>

<p>}</p>

<p>public boolean afterToday(String field, Date date)</p>

<p>{</p>

<p>return afterDate(field, new Date(), date);</p>

<p>}</p>

<p>//decimal(7,4)</p>

<p>public boolean falseRate(String field, Double value)</p>

<p>{</p>

<p>if(doubleNeeded(field, value)) return true;</p>

<p>if(overflow(field, value, 1000d, 4)) return true;</p>

<p>if(!isEmpty(field)) {</p>

<p>if(Double.compare(value.doubleValue(), 100d) &gt; 0</p>

<p>|| Double.compare(value.doubleValue(), 0d) &lt; 0) {</p>

<p>return error(L_FALSE_RATE, field, description(field), &quot;[0, 100]&quot;);</p>

<p>}</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public boolean falseRange(String field, Integer[] range, Integer value)</p>

<p>{</p>

<p>if(intNeeded(field, value)) return true;</p>

<p>if(!isEmpty(field)) {</p>

<p>boolean isIn = false;</p>

<p>String extdesc = &quot;&quot;;</p>

<p>if(range.length &lt;= 0) {</p>

<p>isIn = true; //没指定范围</p>

<p>} else if(range.length == 1) {</p>

<p>if(null == range[0]) {</p>

<p>isIn = true;</p>

<p>} else {</p>

<p>isIn = (range[0].compareTo(value) &lt;= 0);</p>

<p>extdesc = &quot;大于&quot; +range[0];</p>

<p>}</p>

<p>} else if(range.length == 2) {</p>

<p>isIn = ((null==range[0] || range[0].compareTo(value) &lt;= 0)</p>

<p>&amp;&amp; (null==range[1] || range[1].compareTo(value) &gt;= 0));</p>

<p>if(null != range[0]) extdesc = &quot;大于&quot; +range[0];</p>

<p>if(null != range[1]) extdesc = (&quot;&quot;.equals(extdesc)?&quot;&quot;:&quot;, &quot;) +&quot;小于&quot; +range[1];</p>

<p>}</p>

<p>if(!isIn) return error(L_FALSE_RANGE, field, description(field), extdesc);</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>//身份证号码校验</p>

<p>public boolean falseIdCard(String field, String value)</p>

<p>{</p>

<p>if(!isEmpty(field)) {</p>

<p>int idclen = value.length();</p>

<p>String fieldesc = &quot;身份证号码&quot;; // description(field);</p>

<p>String extdesc = &quot;&quot;;</p>

<p>boolean idCardTrue = true;</p>

<p>int pos = value.indexOf(&quot; &quot;);</p>

<p>if(pos&gt;=0) {</p>

<p>extdesc = &quot;第&quot; +(pos +1) +&quot;个字符不能为空格&quot;;</p>

<p>idCardTrue = false;</p>

<p>} else if(idclen != 15 &amp;&amp; idclen != 18) { //检查身份证号码长度</p>

<p>extdesc = &quot;长度必须为15或者18&quot;;</p>

<p>idCardTrue = false;</p>

<p>} else {</p>

<p>boolean isOldCard = (idclen==15);</p>

<p>if(!dateValid(value.substring(6, (isOldCard?12:14)))) { //检查出生日期</p>

<p>extdesc = &quot;出生日期无效&quot;;</p>

<p>idCardTrue = false;</p>

<p>} else {</p>

<p>long verify = 0, modBase = 11;</p>

<p>StringBuffer errExt = new StringBuffer();</p>

<p>try {</p>

<p>int kmax = idclen -(isOldCard?0:1);</p>

<p>for(int k=kmax; k&gt;0; k--) {</p>

<p>errExt = new StringBuffer();</p>

<p>errExt.append(&quot;，第&quot;).append(k).append(&quot;位“&quot;).append(value.substring(k-1, k)).append(&quot;”有误&quot;);</p>

<p>verify += Long.parseLong(value.substring(k-1, k))*((long)(2&lt;&lt;(kmax-k))%modBase);</p>

<p>}</p>

<p>if(!isOldCard) {</p>

<p>verify = (verify%modBase);</p>

<p>String vcode = value.substring(idclen -1);</p>

<p>String rightc = &quot;&quot;;</p>

<p>if(verify == 0 &amp;&amp; !(&quot;1&quot;.equals(vcode))) {</p>

<p>rightc = &quot;1&quot;;</p>

<p>idCardTrue = false;</p>

<p>} else if(verify == 1 &amp;&amp; !(&quot;0&quot;.equals(vcode))) {</p>

<p>rightc = &quot;0&quot;;</p>

<p>idCardTrue = false;</p>

<p>} else if(verify == 2 &amp;&amp; !(&quot;X&quot;.equals(vcode))) {</p>

<p>rightc = &quot;X&quot;;</p>

<p>idCardTrue = false;</p>

<p>} else if(verify &gt; 2 &amp;&amp; !((String.valueOf(modBase -verify +1)).equals(vcode))) {</p>

<p>rightc = (String.valueOf(modBase -verify +1));</p>

<p>idCardTrue = false;</p>

<p>}</p>

<p>if(!idCardTrue) extdesc = &quot;校验位有误(应为&quot; +rightc+&quot;)&quot;;</p>

<p>}</p>

<p>} catch(NumberFormatException e) {</p>

<p>extdesc = (isOldCard?&quot;旧号码必须全由数字0~9组成&quot;:&quot;新号码前17位必须由数字0~9组成&quot;) +errExt.toString();</p>

<p>idCardTrue = false;</p>

<p>}</p>

<p>}</p>

<p>}</p>

<p>if(!idCardTrue) return error(L_FALSE_IDCARD, field, fieldesc, extdesc);</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>public static void duplicate(ActionErrors errors, HttpServletRequest request, String module)</p>

<p>{</p>

<p>error(errors, request, L_DUPLICATE, module, null, null);</p>

<p>}</p>

<p>private boolean error(String label, String field, String paramA)</p>

<p>{</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt;Name:&quot; +field +&quot;&lt;,Value:&quot; +request.getParameter(field) +&quot;&lt;&quot;);</p>

<p>StringBuffer url = (new StringBuffer(&quot;error&quot;)).append(label);</p>

<p>errors.add(field, new ActionError(url.toString(), paramA));</p>

<p>request.setAttribute(errorURL, errors);</p>

<p>return true;</p>

<p>}</p>

<p>private boolean error(String label, String field, String paramA, String paramB)</p>

<p>{</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt;Name:&quot; +field +&quot;&lt;,Value:&quot; +request.getParameter(field) +&quot;&lt;&quot;);</p>

<p>StringBuffer url = (new StringBuffer(&quot;error&quot;)).append(label);</p>

<p>errors.add(field, new ActionError(url.toString(), paramA, paramB));</p>

<p>request.setAttribute(errorURL, errors);</p>

<p>return true;</p>

<p>}</p>

<p>private boolean error(String label, String field, String paramA, String paramB, String paramC)</p>

<p>{</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt;Name:&quot; +field +&quot;&lt;,Value:&quot; +request.getParameter(field) +&quot;&lt;&quot;);</p>

<p>StringBuffer url = (new StringBuffer(&quot;error&quot;)).append(label);</p>

<p>errors.add(field, new ActionError(url.toString(), paramA, paramB, paramC));</p>

<p>request.setAttribute(errorURL, errors);</p>

<p>return true;</p>

<p>}</p>

<p>private boolean dateValid(String datestr)</p>

<p>{</p>

<p>String date = datestr;</p>

<p>if(date.indexOf(&quot;-&quot;) &gt; 0) date = date.replaceAll(&quot;-&quot;, &quot;&quot;);</p>

<p>if(date.indexOf(&quot;/&quot;) &gt; 0) date = date.replaceAll(&quot;/&quot;, &quot;&quot;);</p>

<p>if(null == date) return false;</p>

<p>int len = date.length();</p>

<p>if(len != 6 &amp;&amp; len != 8) return false;</p>

<p>try {</p>

<p>int year = Integer.parseInt(date.substring(0, len-4));</p>

<p>int month = Integer.parseInt(date.substring(len-4, len-2));</p>

<p>int day = Integer.parseInt(date.substring(len-2));</p>

<p>Date dchk = new Date(year -(len==8?1900:0), month-1, day);</p>

<p>if((year == dchk.getYear() +(len==8?1900:0))</p>

<p>&amp;&amp; (month == dchk.getMonth()+1)</p>

<p>&amp;&amp; (day == dchk.getDate()))</p>

<p>return true;</p>

<p>} catch(NumberFormatException e) {</p>

<p>return false;</p>

<p>}</p>

<p>return false;</p>

<p>}</p>

<p>/**</p>

<ul>
<li><p>获取指定xml文件的根结点，并保存</p></li>
<li><p>@param  module 模块名称</p></li>
</ul>


<p>*/</p>

<p>private static void xbuild(String module)</p>

<p>{</p>

<p>Document doc = null;</p>

<p>try {</p>

<p>SAXBuilder sax = new SAXBuilder();</p>

<p>System.out.println(&quot;[--&gt;&gt;Reading XML configuration file &amp;quot;&quot; + confName +&quot;&amp;quot;...&quot;);</p>

<p>doc = sax.build(new File(confName));</p>

<p>} catch(IOException e) {</p>

<p>//e.printStackTrace();</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt; &quot; +e.getMessage());</p>

<p>} catch(JDOMException e) {</p>

<p>//e.printStackTrace();</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt; &quot; +e.getMessage());</p>

<p>} finally {</p>

<p>if(null != doc &amp;&amp; null != doc.getRootElement()) {</p>

<p>Element root = doc.getRootElement();</p>

<p>if(null != root) root = root.getChild(module, root.getNamespace(&quot;&quot;));</p>

<p>if(null != root) {</p>

<p>xMRootMap.put(module, root);</p>

<p>} else {</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt; &quot; +module +&quot; NOT-FOUND in &quot; +confName);</p>

<p>}</p>

<p>}</p>

<p>}</p>

<p>}</p>

<p>/**</p>

<ul>
<li><p>获取XML文件中指定节点参数描述</p></li>
<li><p>@param  name 参数名称</p></li>
<li><p>@return 若参数存在,返回其描述,否则返回空串</p></li>
</ul>


<p>*/</p>

<p>private String description(String name)</p>

<p>{</p>

<p>return description(moduleName, name);</p>

<p>}</p>

<p>public static String description(String module, String name)</p>

<p>{</p>

<p>if(!xMRootMap.containsKey(module)) xbuild(module);</p>

<p>String pmstr = &quot;&quot;;</p>

<p>try {</p>

<p>Element root = (Element)xMRootMap.get(module);</p>

<p>if(null == name) return root.getAttributeValue(&quot;description&quot;);</p>

<p>if(null != root) {</p>

<p>Element elm = root.getChild(name, root.getNamespace(&quot;&quot;));</p>

<p>if(null != elm) pmstr = elm.getText();</p>

<p>else xbuild(module);</p>

<p>}</p>

<p>} catch(NullPointerException e) {</p>

<p>//e.printStackTrace();</p>

<p>System.out.println(&quot;[-FAIL-&gt;&gt; &quot; +module +&quot; NOT-FOUND in &quot; +confName);</p>

<p>}</p>

<p>return pmstr;</p>

<p>}</p>

<p>}</p>

<p></code></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="44">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="42">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
    <h1>About Me</h1>
    <img src="/images/mindon.png" width="128" height="128" alt="Mindon" />
    <p>麥盾, <a title="mindon/!at/gmail/!dot/com" href="/about/">Mindon</a> | <a id="mydonate" name="donate" href="#donate" title="Inspire Me! Thanks"><b>Donate!</b></a>
    <br />Web Developer, @10c</p>
</section>
<form id="fmdonate" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" style="display:none">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="HCJSW6U8PUNEJ">
</form>
<script>
function idonate(key) {
  var fm = document.getElementById('fmdonate');
  fm['hosted_button_id'].value = key;
  fm.submit();
}
document.getElementById('mydonate').onclick = function(){
  idonate('YSVEJMBLM3AFG');
};
</script>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/108546803797935855689?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Categories</h1>
  <ul>

    <li>&raquo; <a class='category' href="/blog/categories/blogms/">blogms</a> ( 308 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/mindon/">mindon</a> ( 87 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/web-tech/">web-tech</a> ( 33 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/light-air-water-m-sci/">light-air-water-m-sci</a> ( 14 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/readings/">readings</a> ( 13 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/chinese-balance-heal/">chinese-balance-heal</a> ( 8 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/chrome-app/">chrome-app</a> ( 12 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/mobile-app/">mobile-app</a> ( 16 )</li>

    <li>&raquo; <a class='category' href="/blog/categories/mindon,/">mindon,</a> ( 1 )</li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/11/09/dji-phantom-the-future-of-possible/">DJI - The Future of Possible</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/09/two-bugs-found-in-jekyll/">Two problems found in Jekyll when using Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/08/shortcuts-for-linux-console/">Shortcuts for Linux console</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/19/happy-angry-and-worries/">开心，怒气和烦恼</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/19/my-next-mobile-phone-and-blackberry-10-dot-3/">My Next Mobile Phone and BlackBerry 10.3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/18/dust-in-a-old-building/">那些恼人的尘灰</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/23/about-xishaoye-roujiamo/">西少爷.肉夹馍，开分店啦</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/23/seeing-is-not-always-believable/">Seeing is Not Always Believable</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/22/the-programming-language-swift/">The Programming Language: Swift</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/10/wordpress-golang-and-swift/">WordPress, Golang & Swift</a>
      </li>
    
  </ul>
</section>



<section>
    <h1>Google廣告</h1>
	<script type="text/javascript"><!--
	google_ad_client = "ca-pub-6997921015773263";
	/* git-aside */
	google_ad_slot = "4887341949";
	google_ad_width = 250;
	google_ad_height = 250;
	//-->
	</script>
	<script type="text/javascript"
	src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
	</script>
</section><section>
    <h1>Links</h1>
	<ul>
		<li><a href="http://www.ted.com/" target="_blank">TED: Ideas worth spreading</a></li>
		<li><a href="http://www.sciencemag.org/" target="_blank">Science Magazine</a></li>
		<li><a href="http://www.spongelab.com/browse/" target="_blank" title="Search science topics, lesson plans, case studies and more">SpongeLab</a></li>
		<li><a href="http://catlinseaviewsurvey.com/seaview.htm" target="_blank">Sea View Survey</a></li>
		<li><a href="http://www.me.gatech.edu/hu/" target="_blank">Hoogle</a></li>
		<li><b>傳統中醫 TCM</b>
    <ul>
      <li><a href="http://jicheng.tw/jcw/" target="_blank">笈成資料庫</a></li>
      <li><a href="http://www.cmchk.org.hk/pcm/chi/" target="_blank">香港中醫藥管理委員會</a></li>
      <li><a href="http://tcm.cmu.edu.tw/zh-tw/" target="_blank">中醫藥資料庫@Taiwan</a></li>
      <li><a href="http://www.relativehumanity.com.tw/web/chinesemedicine.htm" target="_blank">中醫世界</a> | <a href="http://www.relativehumanity.com.tw/web/main01.htm" target="_blank">身與心的平衡</a></li>
    </ul>
    </li>
		<li><b>Readings Around</b>
    <ul>
      <li><a href="http://yeeyan.org/" target="_blank">译言网</a></li>
    </ul>
    </li>
		<li><b>Development</b>
    <ul>
      <li><a href="http://commondatastorage.googleapis.com/chromium-browser-continuous/index.html" target="_blank">Chrome Latest Build</a></li>
      <li><a href="http://snapsvg.io/" target="_blank">SnapSVG</a></li>
      <li><a href="http://www.cocos2d-iphone.org/" target="_blank">COCOS2D</a></li>
    </ul>
    </li>
		<li><b>Friends</b>
    <ul>
      <li><a href="http://askcuix.github.io" target="_blank">Chris&#8217;s Blog</a></li>
      <li><a href="http://justinyan.me" target="_blank">枫言枫语</a></li>
    </ul>
    </li>
		<li><a href="http://blog.sina.com.cn/aby" target="_blank">Aby.生活</a> | <a href="http://weibo.com/imaby" target="_blank">微博</a></li>
		<li><a href="http://mindon.appspot.com/" target="_blank">Mindon.IDEA</a> @GAE  | <a href="http://weibo.com/mindon" target="_blank">微博</a></li>
		<li>PHOTO @<a href="https://picasaweb.google.com/mindon" target="_blank">Picasa</a> | @<a href="http://www.flickr.com/photos/mindon/" target="_blank">Flickr</a> | @<a href="http://photos.nphoto.net/mindon/" target="_blank">NPhoto</a></li>
		<li>@<a href="http://pinterest.com/mindon/" target="_blank">Pinterest</a> | <a href="http://db.tt/eYIbyv7" target="_blank">DropxBox</a></li>
		<li><a href="http://www.hk-rfid.com/" target="_blank" title="Hong Kong RFID Limited is the leading RFID hardware manufacturer, distributor and consultancy firm in Hong Kong and the South China Region."><img src="/images/HKRFID-logo.png" border="0" alt="Hong Kong RFID" /></a></li>
	</ul>
</section>
<section>
    <h1>Learn More</h1>
	<ul>
		<li><a href="http://www.20thingsilearned.com/zh-CN" target="_blank" title="About Browsers & The Web: 关于浏览器和网络的 20 个知识点">Things I Learned</a></li>
		<li><a href="http://www.google.com/intl/zh-CN/goodtoknow/" target="_blank" title="安全健康上网">Good To Know</a></li>
		<li><a href="http://open.163.com/ted" target="_blank">网易公开课 - TED演讲</a></li>
	</ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Mindon Feng -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<script src="/javascripts/modernizr-2.6.2.js"></script>
<script src="/javascripts/ender.js"></script>
<script src="/javascripts/octopress.js" type="text/javascript"></script>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28048168-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<script>
;!function(e,t,r){var n='getElementsByTagName',f=e[n](t)[0]||e[n]('script')[0],x=e.styleSheets;for(var s,c;(s=r.shift())&&(c=e.createElement(t));){c.rel='stylesheet';c.href=s.length==2?s[0]:s;c.media='only x';f.parentNode.insertBefore(c,f);m(c,s,0)}function m(c,s){var d,i;for(i=0;i<x.length;i++){if(x[i].href&&x[i].href.indexOf(s[0])>-1){d=1}if(d){c.media=s.length==2?s[1]:'all'}else{setTimeout(function(){m(c,s)},50)}}}}(document,'link',[
  'http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic'
 ,'http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic'
]);
function js(src){
var job = document.createElement('script'); job.type = 'text/javascript'; job.async = true;
  job.src = src; var ss = document.getElementsByTagName('script'), s=ss[ss.length-1]; s.parentNode.insertBefore(job, s); ss=s=null;
}
$(document).ready(function(){if($('#more-tips').length) $('#more-tips').remove(); if($('#link-tags').length) js('/javascripts/mindon-tags.js')})</script>

<script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    autoDisplay: false,
    multilanguagePage: true,
    gaTrack: true,
    gaId: 'UA-28048168-2',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
// skip IE translate
!document.attachEvent && (function() {
  js('http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit');
})();
</script>



</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mindon';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>







</body>
</html>
